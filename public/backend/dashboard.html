<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HIVE - Online Diagnose Platform</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../assets/css/style.css" />
    <script src="../assets/js/main.js"></script>

    <!--bootstrap--> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   
     <!--font awsome-->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--favicon-->
    <link rel="shortcut icon" href="../assets/images/favicon.png">
<script>
$(document).ready(function(){

  //get patient info

  $.getJSON("https://hiveapp.mybluemix.net/patientInfo/78", function(data){

    $.each(data, function(index, element) {
      $('#user-fname').append('Welcome <span class="text-uppercase">'+element.firstname+'</span');
      
    });
  }); 

  //get booking data

 
  var str1 = "https://hiveapp.mybluemix.net/bookingData/";
  var str2 = $("#userID").html(); 
  var paturl = str1.concat(str2);

  $.getJSON(paturl, function(bookdata){

    $.each(bookdata, function(bookindex, element) {
      
      var booktypename="";
      var booktype=element.bookingType;
      
      if(booktype==1){
        booktypename="Standard";
      }
      else if(booktype==2){
        booktypename="Long";
      }
      else{
        booktypename="Special";
      }
      
      //
      var docID=element.doctorID;

      var str1 = "https://hiveapp.mybluemix.net/doctorInfo/";
      var str2=docID.toString();
      var url = str1.concat(str2);
      
      $.getJSON(url, function(data){

        $.each(data, function(index, elem) {

          $('tbody').append('<tr><td>'+element.bookingID+'</td><td>'+booktypename+'</td><td>'+element.bookingDatetime+'</td><td>'+element.bookingNote+'</td><td>'+elem.firstname+' '+elem.lastname+'</td><td><button class="btn btn-sm btn-success" id="paynow-btn" >Pay Now</button></td></td><td><button class="btn btn-primary btn-sm" id="joinchat-btn" disabled>Join Chat</button></td></tr>');

        }); 

      }); 

      //
    });
    
  }); 

//get doctor list

       $.getJSON("https://hiveapp.mybluemix.net/doctorList", function(data){

$.each(data, function(index, element) {
  
  $('ul').append('<li><span>'+element.firstname+' '+element.lastname+'</span><form action="/booking" method="GET"><input type="submit" value="book" class="btn btn-sm btn-primary" style="position: relative;top:-25px;" onclick="setID('+element.doctorID+')"/></form></li>');

});

});

});
 
 
</script>
</head>

<body>
        <div class="header row" style="position: relative; top:0px;">
            <div class="col-lg-1 col-md-1 logo">
              <a href="#">
                <img src="../assets/images/logo.png">
                <span class="logo-title">HIVE</span>
              </a>
            </div>
            <div class="col-lg-9 col-md-9">

            </div>
            <div class="col-lg-2 col-md-2 user-info">
                <h4 class="user" id="user-fname"></h4>
                <div id="userID"><%= patientID =></div>
            </div>
        </div>

      <!--end of header -->
        <div class="row">
          <div class="col-lg-2 col-md-2"></div>
          <div class="doctor-list col-lg-8 col-md-8">
            <ul>
           
            </ul>
          </div>
          <div class="col-lg-2 col-md-2"></div>
        </div>

        <div class="booking-status row">
          <h2 class="heading">My Bookings</h2>
          <div class="col-lg-1 col-md-1"></div>
          <div class="col-lg-10 col-md-10">
            <table class="table table-bordered table-striped" id="booking-table">
              
              <thead>
                  <th>Booking ID</th><th>Booking Type</th><th>Date Time (DDMMYYYY)</th><th>Booking Note</th><th>Doctor</th><th></th><th></th></tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
          <div class="col-lg-1 col-md-1"></div>
        </div>     
</body>
</html>


		
   
	
 
	
